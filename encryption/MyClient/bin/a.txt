cmake_minimum_required(VERSION 3.28)
project(EncryptionTransfer)

set(CMAKE_CXX_STANDARD 17)

file(GLOB_RECURSE srcs src/*.cpp src/*.cc)

message(STATUS "ss:${srcs}")


set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)

find_package(Boost 1.85.0 REQUIRED COMPONENTS system thread)
find_package(Protobuf REQUIRED)

add_executable(${PROJECT_NAME} ${srcs})
target_include_directories(${PROJECT_NAME} PUBLIC include)
target_link_libraries(${PROJECT_NAME} PUBLIC ${Boost_LIBRARIES} ${Protobuf_LIBRARIES})


add_custom_command(TARGET ${PROJECT_NAME} POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy ${PROJECT_SOURCE_DIR}/CMakeLists.txt $<TARGET_FILE_DIR:${PROJECT_NAME}>/a.txt)

add_custom_command(TARGET ${PROJECT_NAME} PRE_BUILD COMMAND echo "bin:$<TARGET_FILE_DIR:${PROJECT_NAME}>")
